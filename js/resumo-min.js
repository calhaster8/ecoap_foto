function uppPotenciaCalc(){potencia_array=[],upp_condicao="",uppConsumoAnual=0,potencia_max_consumo_anual=0,potencia_max_area=new Number($("#newArea").val()),potencia_max_contratada=new Number($("#potencia").val()),pept_value=new Number($("#peptInstalada").val()),potencia_array=[0!=potencia_max_area&&""!=potencia_max_area&&void 0!=potencia_max_area?.8*potencia_max_area/modulosSolares.area*modulosSolares.potencia:0,0!=potencia_new_contratada&&""!=potencia_new_contratada&&void 0!=potencia_new_contratada?potencia_new_contratada:potencia_max_contratada,potencia_max_consumo_anual];var o=getUppConsumoAnual();potencia_array[2]=2*o/pept_value,potencia_upp=min(potencia_array),uppConsumoAnual=potencia_upp>250?250:potencia_upp,potencia_upp==potencia_array[1]?upp_condicao="Limite de potência pela potência contratada":potencia_upp==potencia_array[2]?upp_condicao="Limite de potência pelo consumo":potencia_upp>250?upp_condicao="Limite de potência pela lei":potencia_upp==potencia_array[0]&&(upp_condicao="Limite de potência pela área disponível")}function categoriaUPP(){catUPP=[];var o=$("#question_one").val(),a=$("#question_two").val();catUPP="1"==o?tarifa_uppI[1]:"1"==a?tarifa_uppI[2]:tarifa_uppI[0]}function tarifaUpp(){return categoriaUPP(),catUPP.valor}function uppResultados(){var o=uppPotenciaCalc();upp_resultados_pc=potencia_upp,upp_resultados_n_paineis=potencia_upp/.275,upp_resultados_area_ocupada=1.7*upp_resultados_n_paineis/.8,upp_resultados_prod_volt=potencia_upp*pept_value;var a=getConsumo(consumoLetter,cicloHorarioLetter,i);upp_resultados_reducao_dep_ene=upp_resultados_prod_volt/a*100,upp_resultados_custos_energia=getUppCustosComEnergia(),upp_resultados_custos_php=getUppCustosComPhp(),upp_resultados_custos_isp=.001*consumo_anual,upp_resultados_custos_energicos=upp_resultados_custos_energia+upp_resultados_custos_isp+upp_resultados_custos_php,upp_resultados_rec_foto=upp_resultados_prod_volt*tarifaUpp(),upp_resultados_reducao_custos=upp_resultados_rec_foto/upp_resultados_custos_energicos*100,upp_resultados_investimento=getUppInvestimento(),upp_custos_anuais_new=.02*upp_resultados_investimento,upp_resultados_payback=upp_resultados_investimento/upp_resultados_rec_foto,$("#pot_central").html(potencia_upp.toFixed(0)+" kW"),$("#nPaineis").html(upp_resultados_n_paineis.toFixed(0)),$("#area_ocupada").html(upp_resultados_area_ocupada.toFixed(0)+" m²"),$("#observations").html(upp_condicao),$("#consumo_instalacao").html(consumo_anual.toFixed(0)+" kWh"),$("#prod_foto").html(upp_resultados_prod_volt.toFixed(0)+" kWh"),$("#auto_consumo").html(upp_resultados_prod_volt.toFixed(0)+" kWh"),$("#consumo_energia_ren").html(upp_resultados_reducao_dep_ene.toFixed(0)+"%"),$("#custos_energia").html(upp_resultados_custos_energicos.toFixed(0)+" €"),$("#receita_foto").html(upp_resultados_rec_foto.toFixed(0)+" €<br>"+catUPP.nome),$("#reduc_custos").html(upp_resultados_reducao_custos.toFixed(0)+"%"),$("#investe").html(upp_resultados_investimento.toFixed(0)+" €"),$("#custos_anuais").html(upp_custos_anuais_new.toFixed(0)+" €"),$("#paybck").html(upp_resultados_payback.toFixed(1)+" anos")}function getUppCustosComEnergia(){var o=0;if(1==consumoLetter){if(1==cicloHorarioLetter){var a=new Number($("#consumo1").val());o=a*somatorio_anual_ufm_simples}else if(2==cicloHorarioLetter){var e=new Number($("#fora_vazio2").val()),n=new Number($("#vazio2").val());o=e*somatorio_anual_ufm_bh_foravazio+n*somatorio_anual_ufm_bh_vazio}else if(3==cicloHorarioLetter){var u=new Number($("#ponta3").val()),_=new Number($("#cheia3").val()),r=new Number($("#vazio3").val());o=u*somatorio_anual_ufm_th_ponta+_*somatorio_anual_ufm_th_cheia+r*somatorio_anual_ufm_th_vazio}else if(4==cicloHorarioLetter){var t=new Number($("#ponta4").val()),m=new Number($("#cheia4").val()),i=new Number($("#vazio4").val()),s=new Number($("#super_vazio4").val());o=t*somatorio_anual_ufm_tth_ponta+m*somatorio_anual_ufm_tth_cheia+i*somatorio_anual_ufm_tth_vazio+s*somatorio_anual_ufm_tth_svazio}}else if(2==consumoLetter){if(1==cicloHorarioLetter){var a=new Number($("#consumo1").val());o=a*consumo_ca_simples}else if(2==cicloHorarioLetter){var e=new Number($("#fora_vazio2").val()),n=new Number($("#vazio2").val());o=e*consumo_ca_bh_foravazio+n*consumo_ca_bh_vazio}else if(3==cicloHorarioLetter){var u=new Number($("#ponta3").val()),_=new Number($("#cheia3").val()),r=new Number($("#vazio3").val());o=u*consumo_ca_th_ponta+_*consumo_ca_th_cheia+r*consumo_ca_th_vazio}else if(4==cicloHorarioLetter){var t=new Number($("#ponta4").val()),m=new Number($("#cheia4").val()),i=new Number($("#vazio4").val()),s=new Number($("#super_vazio4").val());o=t*consumo_ca_tth_ponta+m*consumo_ca_tth_cheia+i*consumo_ca_tth_vazio+s*consumo_ca_tth_svazio}}else if(12==consumoLetter)if(1==cicloHorarioLetter){var a=new Number($("#consumo1").val());o=a*somatorio_anual_f_simples}else if(2==cicloHorarioLetter){var e=new Number($("#fora_vazio2").val()),n=new Number($("#vazio2").val());o=e*somatorio_anual_f_bh_foravazio+n*somatorio_anual_f_bh_vazio}else if(3==cicloHorarioLetter){var u=new Number($("#ponta3").val()),_=new Number($("#cheia3").val()),r=new Number($("#vazio3").val());o=u*somatorio_anual_f_th_ponta+_*somatorio_anual_f_th_cheia+r*somatorio_anual_f_th_vazio}else if(4==cicloHorarioLetter){var t=new Number($("#ponta4").val()),m=new Number($("#cheia4").val()),i=new Number($("#vazio4").val()),s=new Number($("#super_vazio4").val());o=t*somatorio_anual_f_tth_ponta+m*somatorio_anual_f_tth_cheia+i*somatorio_anual_f_tth_vazio+s*somatorio_anual_f_tth_svazio}return o}function getUppCustosComPhp(){var o=0;if(void 0!=$("#pt_horas_ponta4").val()){ptHorasPonta=new Number($("#pt_horas_ponta4").val());var a=new Number($("#cicloTarifario").val());o=getConsumoAnualPonta()/ciclo_tarifarioI[a].numHoras*ptHorasPonta*365}return o}function getUppInvestimento(){for(var o=0;o<investimentoI.length;o++){if(void 0==investimentoI[o].max)return potencia_upp*investimentoI[o].valor;if(potencia_upp<investimentoI[o].max&&potencia_upp>=investimentoI[o].min)return potencia_upp*investimentoI[o].valor}}function min(o){var a=0;if(o.length>0)for(var e=0;e<o.length;e++)(o[e]<a||0==a)&&(a=o[e]);return a}function getUppConsumoAnual(){consumo_anual=0;for(var o=$("#facturas").val(),a=$("#cicloHorario").val(),e=$("#vacationsTime").val(),n=$("#vacations").val(),u=1;u<13;u++)12==o?consumo_anual+=getConsumo(o,a,u):1==o?"Sim"!=n||8!=u&&12!=u&&7!=u||-1==$.inArray(u,periodoEncerramento[e].valor)?consumo_anual+=getConsumo(o,a,u)/12:consumo_anual+=getConsumo(o,a,u)/12*cons_meses_ferias:"Sim"==n?consumo_anual+=getConsumo(o,a,u)*varConsumoMensal[u-1].periodos[e].value:consumo_anual=getConsumo(o,a,u);return consumo_anual}function getConsumo(o,a,e){if(1==o){if(1==a)return 12*new Number($("#mensal_consumo").val());if(2==a){var n=new Number($("#mensal_fora_vazio").val()),u=new Number($("#mensal_vazio").val());return somatorio_anual_ufm_bh_foravazio=12*n,somatorio_anual_ufm_bh_vazio=12*u,somatorio_anual_ufm_bh_foravazio+somatorio_anual_ufm_bh_vazio}if(3==a){var _=new Number($("#mensal_ponta").val()),r=new Number($("#mensal_cheia").val()),t=new Number($("#mensal_vazio").val());return somatorio_anual_ufm_th_ponta=12*_,somatorio_anual_ufm_th_cheia=12*r,somatorio_anual_ufm_th_vazio=12*t,somatorio_anual_ufm_th_ponta+somatorio_anual_ufm_th_cheia+somatorio_anual_ufm_th_vazio}if(4==a){var m=new Number($("#mensal_ponta").val()),i=new Number($("#mensal_cheia").val()),s=new Number($("#mensal_vazio").val()),c=new Number($("#mensal_super_vazio").val());return somatorio_anual_ufm_tth_ponta=12*m,somatorio_anual_ufm_tth_cheia=12*i,somatorio_anual_ufm_tth_vazio=12*s,somatorio_anual_ufm_tth_svazio=12*consumo_ufm_tth_svazio,somatorio_anual_ufm_tth_ponta+somatorio_anual_ufm_tth_cheia+somatorio_anual_ufm_tth_vazio+somatorio_anual_ufm_tth_svazio}}else if(2==o){if(1==a){var l=new Number($("#anual_consumo").val());return new Number(l)}if(2==a){var v=new Number($("#anual_fora_vazio").val()),p=new Number($("#anual_vazio").val());return v+p}if(3==a){var b=new Number($("#anual_ponta").val()),w=new Number($("#anual_cheia").val()),N=new Number($("#anual_vazio").val());return b+w+N}if(4==a){var f=new Number($("#anual_ponta").val()),h=new Number($("#anual_cheia").val()),z=new Number($("#anual_vazio").val()),d=new Number($("#anual_super_vazio").val());return f+h+z+d}}else if(12==o)if(1==a){if(1==e)return new Number($("#consumo_1_consumo").val());if(2==e)return new Number($("#consumo_2_consumo").val());if(3==e)return new Number($("#consumo_3_consumo").val());if(4==e)return new Number($("#consumo_4_consumo").val());if(5==e)return new Number($("#consumo_5_consumo").val());if(6==e)return new Number($("#consumo_6_consumo").val());if(7==e)return new Number($("#consumo_7_consumo").val());if(8==e)return new Number($("#consumo_8_consumo").val());if(9==e)return new Number($("#consumo_9_consumo").val());if(10==e)return new Number($("#consumo_10_consumo").val());if(11==e)return new Number($("#consumo_11_consumo").val());if(12==e)return new Number($("#consumo_12_consumo").val())}else if(2==a){var g=new Number($("#consumo_1_fora_vazio").val()),x=new Number($("#consumo_2_fora_vazio").val()),C=new Number($("#consumo_3_fora_vazio").val()),L=new Number($("#consumo_4_fora_vazio").val()),P=new Number($("#consumo_5_fora_vazio").val()),H=new Number($("#consumo_6_fora_vazio").val()),U=new Number($("#consumo_7_fora_vazio").val()),F=new Number($("#consumo_8_fora_vazio").val()),I=new Number($("#consumo_9_fora_vazio").val()),y=new Number($("#consumo_10_fora_vazio").val()),A=new Number($("#consumo_11_fora_vazio").val()),k=new Number($("#consumo_12_fora_vazio").val()),S=new Number($("#consumo_1_vazio").val()),W=new Number($("#consumo_2_vazio").val()),E=new Number($("#consumo_3_vazio").val()),q=new Number($("#consumo_4_vazio").val()),T=new Number($("#consumo_5_vazio").val()),M=new Number($("#consumo_6_vazio").val()),R=new Number($("#consumo_7_vazio").val()),j=new Number($("#consumo_8_vazio").val()),B=new Number($("#consumo_9_vazio").val()),D=new Number($("#consumo_10_vazio").val()),G=new Number($("#consumo_11_vazio").val()),J=new Number($("#consumo_12_vazio").val());if(1==e)return g+S;if(2==e)return x+W;if(3==e)return C+E;if(4==e)return L+q;if(5==e)return P+T;if(6==e)return H+M;if(7==e)return U+R;if(8==e)return F+j;if(9==e)return I+B;if(10==e)return y+D;if(11==e)return A+G;if(12==e)return k+J}else if(3==a){var K=new Number($("#consumo_1_ponta").val()),O=new Number($("#consumo_2_ponta").val()),Q=new Number($("#consumo_3_ponta").val()),V=new Number($("#consumo_4_ponta").val()),X=new Number($("#consumo_5_ponta").val()),Y=new Number($("#consumo_6_ponta").val()),Z=new Number($("#consumo_7_ponta").val()),oo=new Number($("#consumo_8_ponta").val()),ao=new Number($("#consumo_9_ponta").val()),eo=new Number($("#consumo_10_ponta").val()),no=new Number($("#consumo_11_ponta").val()),uo=new Number($("#consumo_12_ponta").val()),_o=new Number($("#consumo_1_cheia").val()),ro=new Number($("#consumo_2_cheia").val()),to=new Number($("#consumo_3_cheia").val()),mo=new Number($("#consumo_4_cheia").val()),io=new Number($("#consumo_5_cheia").val()),so=new Number($("#consumo_6_cheia").val()),co=new Number($("#consumo_7_cheia").val()),lo=new Number($("#consumo_8_cheia").val()),vo=new Number($("#consumo_9_cheia").val()),po=new Number($("#consumo_10_cheia").val()),$o=new Number($("#consumo_11_cheia").val()),bo=new Number($("#consumo_12_cheia").val()),wo=new Number($("#consumo_1_vazio").val()),No=new Number($("#consumo_2_vazio").val()),fo=new Number($("#consumo_3_vazio").val()),ho=new Number($("#consumo_4_vazio").val()),zo=new Number($("#consumo_5_vazio").val()),go=new Number($("#consumo_6_vazio").val()),xo=new Number($("#consumo_7_vazio").val()),Co=new Number($("#consumo_8_vazio").val()),Lo=new Number($("#consumo_9_vazio").val()),Po=new Number($("#consumo_10_vazio").val()),Ho=new Number($("#consumo_11_vazio").val()),Uo=new Number($("#consumo_12_vazio").val());if(1==e)return K+_o+wo;if(2==e)return O+ro+No;if(3==e)return Q+to+fo;if(4==e)return V+mo+ho;if(5==e)return X+io+zo;if(6==e)return Y+so+go;if(7==e)return Z+co+xo;if(8==e)return oo+lo+Co;if(9==e)return ao+vo+Lo;if(10==e)return eo+po+Po;if(11==e)return no+$o+Ho;if(12==e)return uo+bo+Uo}else if(4==a){var Fo=new Number($("#consumo_1_ponta").val()),Io=new Number($("#consumo_2_ponta").val()),yo=new Number($("#consumo_3_ponta").val()),Ao=new Number($("#consumo_4_ponta").val()),ko=new Number($("#consumo_5_ponta").val()),So=new Number($("#consumo_6_ponta").val()),Wo=new Number($("#consumo_7_ponta").val()),Eo=new Number($("#consumo_8_ponta").val()),qo=new Number($("#consumo_9_ponta").val()),To=new Number($("#consumo_10_ponta").val()),Mo=new Number($("#consumo_11_ponta").val()),Ro=new Number($("#consumo_12_ponta").val()),jo=new Number($("#consumo_1_cheia").val()),Bo=new Number($("#consumo_2_cheia").val()),Do=new Number($("#consumo_3_cheia").val()),Go=new Number($("#consumo_4_cheia").val()),Jo=new Number($("#consumo_5_cheia").val()),Ko=new Number($("#consumo_6_cheia").val()),Oo=new Number($("#consumo_7_cheia").val()),Qo=new Number($("#consumo_8_cheia").val()),Vo=new Number($("#consumo_9_cheia").val()),Xo=new Number($("#consumo_10_cheia").val()),Yo=new Number($("#consumo_11_cheia").val()),Zo=new Number($("#consumo_12_cheia").val()),oa=new Number($("#consumo_1_vazio").val()),aa=new Number($("#consumo_2_vazio").val()),ea=new Number($("#consumo_3_vazio").val()),na=new Number($("#consumo_4_vazio").val()),ua=new Number($("#consumo_5_vazio").val()),_a=new Number($("#consumo_6_vazio").val()),ra=new Number($("#consumo_7_vazio").val()),ta=new Number($("#consumo_8_vazio").val()),ma=new Number($("#consumo_9_vazio").val()),ia=new Number($("#consumo_10_vazio").val()),sa=new Number($("#consumo_11_vazio").val()),ca=new Number($("#consumo_12_vazio").val()),la=new Number($("#consumo_1_super_vazio").val()),va=new Number($("#consumo_2_super_vazio").val()),pa=new Number($("#consumo_3_super_vazio").val()),$a=new Number($("#consumo_4_super_vazio").val()),ba=new Number($("#consumo_5_super_vazio").val()),wa=new Number($("#consumo_6_super_vazio").val()),Na=new Number($("#consumo_7_super_vazio").val()),fa=new Number($("#consumo_8_super_vazio").val()),ha=new Number($("#consumo_9_super_vazio").val()),za=new Number($("#consumo_10_super_vazio").val()),da=new Number($("#consumo_11_super_vazio").val()),ga=new Number($("#consumo_12_super_vazio").val());if(1==e)return Fo+jo+oa+la;if(2==e)return Io+Bo+aa+va;if(3==e)return yo+Do+ea+pa;if(4==e)return Ao+Go+na+$a;if(5==e)return ko+Jo+ua+ba;if(6==e)return So+Ko+_a+wa;if(7==e)return Wo+Oo+ra+Na;if(8==e)return Eo+Qo+ta+fa;if(9==e)return qo+Vo+ma+ha;if(10==e)return To+Xo+ia+za;if(11==e)return Mo+Yo+sa+da;if(12==e)return Ro+Zo+ca+ga}}function getConsumoAnualPonta(){var o=$("#ntensao").val();return 0==o||1==o||2==o?1==consumoLetter?somatorio_anual_ufm_tth_ponta:2==consumoLetter?consumo_ca_tth_ponta:somatorio_anual_f_tth_ponta:0}